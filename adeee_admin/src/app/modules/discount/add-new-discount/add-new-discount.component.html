<div class="card card-custom gutter-b">
  <div class="card-header">
    <div class="card-title">
      <h3 class="card-label"><i><span class="svg-icon svg-icon-primary svg-icon-3x mx-2"><!--begin::Svg Icon | path:/var/www/preview.keenthemes.com/metronic/releases/2021-05-14-112058/theme/html/demo1/dist/../src/media/svg/icons/Shopping/Sale2.svg-->
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
          <title>Stockholm-icons / Shopping / Sale2</title>
          <desc>Created with Sketch.</desc>
          <defs/>
          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <rect x="0" y="0" width="24" height="24"/>
              <polygon fill="#000000" opacity="0.3" points="12 20.0218549 8.47346039 21.7286168 6.86905972 18.1543453 3.07048824 17.1949849 4.13894342 13.4256452 1.84573388 10.2490577 5.08710286 8.04836581 5.3722735 4.14091196 9.2698837 4.53859595 12 1.72861679 14.7301163 4.53859595 18.6277265 4.14091196 18.9128971 8.04836581 22.1542661 10.2490577 19.8610566 13.4256452 20.9295118 17.1949849 17.1309403 18.1543453 15.5265396 21.7286168"/>
              <polygon fill="#000000" points="14.0890818 8.60255815 8.36079737 14.7014391 9.70868621 16.049328 15.4369707 9.950447"/>
              <path d="M10.8543431,9.1753866 C10.8543431,10.1252593 10.085524,10.8938719 9.13585777,10.8938719 C8.18793881,10.8938719 7.41737243,10.1252593 7.41737243,9.1753866 C7.41737243,8.22551387 8.18793881,7.45690126 9.13585777,7.45690126 C10.085524,7.45690126 10.8543431,8.22551387 10.8543431,9.1753866" fill="#000000" opacity="0.3"/>
              <path d="M14.8641422,16.6221564 C13.9162233,16.6221564 13.1456569,15.8535438 13.1456569,14.9036711 C13.1456569,13.9520555 13.9162233,13.1851857 14.8641422,13.1851857 C15.8138085,13.1851857 16.5826276,13.9520555 16.5826276,14.9036711 C16.5826276,15.8535438 15.8138085,16.6221564 14.8641422,16.6221564 Z" fill="#000000" opacity="0.3"/>
          </g>
      </svg><!--end::Svg Icon--></span></i>Agregar nuevo descuento</h3>
    </div> 
    <div class="card-toolbar">
          
    </div>
  </div>
  <div class="card-body">
      <ng-container *ngIf="isLoading$ | async">
          <span class="spinner spinner-primary ml-5"></span>
      </ng-container>

      <div class="form-group row">
          <div class="col-4">
              <div class="form-group">
                  <label>Tipo de descuento: <span class="text-danger">*</span></label>
                  <div class="radio-list">
                      <label class="radio">
                          <input type="radio" [checked]="type_discount == 1" (click)="checkedTypeDiscount(1)" name="radios1">
                          <span></span>
                          Por Porcentaje
                      </label>
                      <label class="radio">
                          <input type="radio" [checked]="type_discount == 2" (click)="checkedTypeDiscount(2)" name="radios1">
                          <span></span>
                          Por Moneda
                      </label>
                  </div>
              </div>
          </div>
          <div class="col-4">
              <div class="form-group">
                  <label>Descuento: <span class="text-danger">*</span></label>
                  <input type="number" class="form-control" placeholder="" [(ngModel)]="discount" name="discount">
                  <span class="form-text text-muted">Ingresa la cantidad.</span>
              </div>
          </div>
      </div>
      <div class="form-group row">
        <div class="col-4">
          <label>Fecha inicio: <span class="text-danger">*</span></label>
            <div class="input-group input-group-solid">
              <input type="date"
              class="form-control form-control-lg form-control-solid"
              [(ngModel)]="start_date"
              />
            </div>
          </div>
        <div class="col-4">
          <label>Fecha final: <span class="text-danger">*</span></label>
            <div class="input-group input-group-solid">
              <input type="date"
              class="form-control form-control-lg form-control-solid"
              [(ngModel)]="end_date"
              />
            </div>
        </div>
      </div>
      <div class="form-group row">
          <div class="col-4">
              <div class="form-group">
                  <label>PRODUCTO/CATEGORIAS: <span class="text-danger">*</span></label>
                  <div class="radio-list">
                      <label class="radio">
                          <input type="radio" [checked]="type_segment == 1" (click)="checkedTypeSegment(1)" name="radios3">
                          <span></span>
                          Aplicado a Producto
                      </label>
                      <label class="radio">
                          <input type="radio" [checked]="type_segment == 2" (click)="checkedTypeSegment(2)" name="radios3">
                          <span></span>
                          Aplicado a Categoría
                      </label>
                  </div>
              </div>
          </div>
          <div class="col-4" *ngIf="type_segment == 1">
              <div class="form-group">
                  <label>Selec. Productos: <span class="text-danger">*</span></label>
                  <select
                      class="form-control"
                      name="categorie"
                      [(ngModel)]="product"
                  >
                      <option value="">Ninguno</option>
                      <ng-container *ngFor="let item of products">
                          <option [value]="item._id">{{ item.title }}</option>
                      </ng-container>
                      
                  </select>
              </div>
          </div>
          <div class="col-4" *ngIf="type_segment == 2">
              <div class="form-group">
                  <label>Selec. Categoria: <span class="text-danger">*</span></label>
                  <select
                      class="form-control"
                      name="categorie"
                      [(ngModel)]="categorie"
                  >
                      <option value="">Ninguno</option>
                      <ng-container *ngFor="let item of categories">
                          <option [value]="item._id">{{ item.title }}</option>
                      </ng-container>
                      
                  </select>
              </div>
          </div>
          <div class="col-4">
              <button class="btn btn-primary" (click)="addProductOrCategorie()">Agregar a la lista</button>
          </div>
          <div class="col-12">
              <div class="table-responsive">
                  <table class="table table-head-custom table-vertical-center" id="kt_advance_table_widget_1">
                      <thead>
                          <tr class="text-left">
                              <th *ngIf="type_segment == 1">PRODUCTO</th>
                              <th *ngIf="type_segment == 2">CATEGORIA</th>
                              <th>ACCIÓN</th>
                          </tr>
                      </thead>
                      <tbody *ngIf="type_segment == 1">
                          <tr *ngFor="let product of products_selected">
                              <td>{{ product.title }}</td>
                              <td>
                                  <button class="btn btn-danger btn-sm" (click)="removeProduct(product)">X</button>
                              </td>
                          </tr>
                      </tbody>
                      <tbody *ngIf="type_segment == 2">
                          <tr *ngFor="let categorie of categories_selected">
                              <td>{{ categorie.title }}</td>
                              <td>
                                  <button class="btn btn-danger btn-sm" (click)="removeCategorie(categorie)">X</button>
                              </td>
                          </tr>
                      </tbody>
                  </table>
              </div>
          </div>
      </div>

      <div class="form-group row">
          <div class="col-12">
              <button class="btn btn-primary" (click)="save()"> AGREGAR DESCUENTO</button>
          </div>
      </div>
  </div>
</div>